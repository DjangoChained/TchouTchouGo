{% extends 'main/base.html' %} {% block content %} {% load static %}

<div class="bloc_cards">
	<div class="pull-left"><a href="{% url "search" %}"><button type="button" class="btn btn-info">Réserver un autre billet</button></a></div>
	<div class="pull-right"><a href="{% url "order" %}"><button type="button" class="btn btn-info">Payer</button></a></div>
	<h4 class="text-center" style="color:white;text-shadow: -0.8px 0 black, 0 0.8px black, 0.8px 0 black, 0 -0.8px black;">Mon panier</h4>
	<div class="card-columns">
		{% for travel in cart.list_items %}
		<div class="card">
			<div class="card-header">
				{{ travel.obj.date }}
				<div class="pull-right">
					<a href="#" class="travel-modal" data-url="{% url 'travel_map' travel.obj.id %}"><i class="fa fa-map-marker bigger" aria-hidden="true"></i></a>
					&nbsp;
					<a class="supprimer" href="{% url 'cart_remove' travel.obj.id %}"><i class="fa fa-trash"></i></a>
				</div>
			</div>
			<ul class="list-group list-group-flush">
				{% for ticket in travel.obj.ticket_set.all %}
				<li class="list-group-item">
					<div><span class="hour">{{ ticket.start_halt.arrival }}</span>{{ ticket.start_halt.station }}</div>
					<div class="train">{{ ticket.start_halt.train.traintype }} <strong>{{ ticket.start_halt.train.number }}</strong></div>
					<div><span class="hour">{{ ticket.end_halt.arrival }}</span>{{ ticket.end_halt.station }}</div>
				</li>
				{% endfor %}
				<li class="list-group-item">
					<span>{{ travel.obj.passengers }} passager{{ travel.obj.passengers|pluralize }}</span>
					<div class="price float-right">{{ travel.obj.price|stringformat:".2f" }} €</div>
				</li>
			</ul>
		</div>
		{% endfor %}
	</div>
	<script type="text/javascript" src="{% static 'main/js/travelmaps.js' %}"></script>
</div>

{% endblock %}
