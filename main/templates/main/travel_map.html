<div id="map"></div>
<script>
    var map;
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            //zoom: 5,
            //center: new google.maps.LatLng(48.85,2.34),
            mapTypeId: 'terrain'
        });
        data = {% autoescape off %}{{ map_geojson }}{% endautoescape %}
        map.data.addGeoJson(data);
        var bounds = new google.maps.LatLngBounds();
        for (var i = 0; i < data.features.length; i++) {
            if(data.features[i].geometry.type == 'Point') {
                a = data.features[i].geometry.coordinates[0];
                b = data.features[i].geometry.coordinates[1];
            } else if(data.features[i].geometry.type == 'LineString') {
                for(var ii = 0; ii < data.features[i].geometry.coordinates.length; ii++) {
                    a = data.features[i].geometry.coordinates[ii][0];
                    b = data.features[i].geometry.coordinates[ii][1];
                }
            } else {
                console.error("Type inconnu : " + data.features[i].geometry.type);
                continue;
            }
            point = new google.maps.LatLng(b, a);
            bounds.extend(point);
        }
        map.fitBounds(bounds);
    }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&callback=initMap">
</script>
